import{_ as $,d as le,r as l,L as h,w as G,a as J,b as c,o as g,c as F,e as t,f as o,g as Q,t as E,h as Y,i as k,j as B,C as ie}from"./entry-2b1393c9.mjs";const se=le({__name:"MatrixConsole",setup(I,{expose:r}){r();const S=l("-"),e=l("-"),b=l(0),f=l(0),i=l(0),d=l(0),a=l(512),C=l(1e4),y=l(null),p=l(a.value),s=h.of(a.value),O=new ie,_=l(!1);G(f,Z),G(d,U);const m=()=>L(),ee=()=>L(),ne=()=>N(),te=()=>M(),V=l(J.DEFAULT),oe=J.all(),z=()=>V.value.isInfinite();function N(){_.value=!0,X()&&L(),R(s.lives);const n=setInterval(()=>{K(()=>{s.update(),i.value++}),w()&&(_.value=!1,alert("\u6307\u5B9A\u3057\u305F\u8A08\u7B97\u56DE\u6570\u306B\u9054\u3057\u307E\u3057\u305F\u3002\u7D42\u4E86\u3057\u307E\u3059\u3002")),_.value||clearInterval(n)},1),u=setInterval(()=>{j(),_.value||clearInterval(u)},200)}function M(){_.value=!1}function L(){b.value=0,i.value=1,f.value=0,d.value=0,s.langtonsLoops(a.value),R(s.lives)}function R(n){const u=y.value;u.height!==n.length&&(u.width=n[0].length,u.height=n.length,a.value=n.length);const v=u.getContext("2d");return P(n,v),v}function P(n,u){u.clearRect(0,0,n[0].length,n.length),u.beginPath();for(let v=0;v<n.length;v++){const T=n[v];for(let D=0;D<T.length;D++){const q=T[D];q!==0&&(u.fillStyle=O.colorOf(q),u.fillRect(D,v,1,1))}}}function K(n){const u=Date.now();n();const T=Date.now()-u;d.value+=T}function U(){const n=d.value/i.value/1e3;S.value=A(n,3),e.value=A(d.value/1e3,3)}function Z(){const n=f.value/i.value*100;b.value=Number(n.toFixed(0))}let x=!1;function j(){x||(x=!0,R(s.lives),f.value++,x=!1)}const w=()=>!z()&&i.value>=C.value,ue=()=>w()||H(a.value)!==!0;function A(n,u=0){return Number(n.toFixed(u)).toLocaleString()}function ae(n){return"0123456789".includes(n.key)?!0:(n.stopImmediatePropagation(),n.preventDefault(),!1)}const H=n=>{if(!n)return"\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002";if(isNaN(n))return"\u6570\u5024\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002";const u=n;return u<h.MIN_SIZE||u>h.MAX_SIZE?`${h.MIN_SIZE} \u304B\u3089 ${h.MAX_SIZE} \u306E\u7BC4\u56F2\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002`:!0},X=()=>f.value<=0,W={cycleTime:S,totalTime:e,drawingRate:b,displayCount:f,calculateCount:i,totalElpasedMs:d,canvasOneSideSize:a,maxExecuteCount:C,matrixCanvas:y,canvasHtmlOutsideSize:p,langtonsLoops:s,cellTypes:O,isRunning:_,onMounted:m,onClickReset:ee,onClickStart:ne,onClickStop:te,limitCountBehavior:V,limitCountBehaviors:oe,isInfiniteOfLimitCount:z,doLangtonsLoops:N,stopLangtonsLoops:M,resetLangtonsLoops:L,renderCanvasWithResizeOf:R,renderCanvasOf:P,withMeasure:K,renderCycleTime:U,renderDrawingRate:Z,drawingLock:x,renderLives:j,isOverLimit:w,isDisableStart:ue,formatNumberOf:A,numberOnlyKeyPressFilter:ae,validateCanvasOneSideSizeOf:H,isStatusOfReseted:X};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),ce=B(" \u30EA\u30B5\u30A4\u30AF\u30EB\u30BF\u30A4\u30E0: "),re=B(" \u63CF\u753B\u7387(\u8868\u793A\u56DE\u6570/\u8A08\u7B97\u56DE\u6570): "),de={key:0},_e={key:1},ve=B("RESET"),fe=B(" START "),me=B(" STOP "),Ce=["width","height"];function ge(I,r,S,e,b,f){const i=c("v-card-text"),d=c("v-text-field"),a=c("v-col"),C=c("v-row"),y=c("v-select"),p=c("v-container"),s=c("v-btn"),O=c("v-card-actions"),_=c("v-card");return g(),F(_,{class:"mx-auto"},{default:t(()=>[o(p,null,{default:t(()=>[o(C,{dense:"","no-gutters":""},{default:t(()=>[o(a,null,{default:t(()=>[o(i,null,{default:t(()=>[ce,Q("div",null,E(e.cycleTime)+" \u79D2 (\u958B\u59CB\u304B\u3089\u306E\u7DCF\u5B9F\u884C\u6642\u9593: "+E(e.totalTime)+" \u79D2) ",1)]),_:1}),o(i,null,{default:t(()=>[re,e.isStatusOfReseted()?k("",!0):(g(),Y("div",de,E(e.drawingRate)+"% ("+E(e.displayCount)+"/"+E(e.calculateCount)+") ",1)),e.isStatusOfReseted()?(g(),Y("div",_e,"-")):k("",!0)]),_:1}),o(i,null,{default:t(()=>[o(p,{fluid:""},{default:t(()=>[o(C,{dense:"","no-gutters":""},{default:t(()=>[o(a,null,{default:t(()=>[o(d,{modelValue:e.canvasOneSideSize,"onUpdate:modelValue":r[0]||(r[0]=m=>e.canvasOneSideSize=m),disabled:e.isRunning||!e.isStatusOfReseted(),onKeypress:e.numberOnlyKeyPressFilter,label:"\u4E16\u754C\u306E\u5927\u304D\u3055(CanvasSize)\u203BRESET\u3067\u53CD\u6620",rules:[e.validateCanvasOneSideSizeOf],counter:"3",maxlength:"3",variant:"outlined",leng:"",dense:""},null,8,["modelValue","disabled","rules"])]),_:1})]),_:1}),o(C,{dense:"","no-gutters":""},{default:t(()=>[o(a,{cols:"6"},{default:t(()=>[o(y,{modelValue:e.limitCountBehavior,"onUpdate:modelValue":r[1]||(r[1]=m=>e.limitCountBehavior=m),items:e.limitCountBehaviors,"item-title":"name","item-value":"id",disabled:e.isRunning,label:"\u8A08\u7B97\u4E0A\u9650","return-object":"",variant:"outlined"},null,8,["modelValue","items","disabled"])]),_:1}),o(a,{cols:"6"},{default:t(()=>[o(d,{modelValue:e.maxExecuteCount,"onUpdate:modelValue":r[2]||(r[2]=m=>e.maxExecuteCount=m),disabled:e.isRunning||e.isInfiniteOfLimitCount(),onKeypress:e.numberOnlyKeyPressFilter,label:"\u4E0A\u9650\u56DE\u6570",counter:"6",maxlength:"6",variant:"outlined",leng:"",dense:""},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),o(O,null,{default:t(()=>[o(s,{color:"error",outlined:"",onClick:e.onClickReset},{default:t(()=>[ve]),_:1}),e.isRunning?k("",!0):(g(),F(s,{key:0,color:e.isDisableStart()?"disable":"primary",outlined:"",disabled:e.isDisableStart(),onClick:e.onClickStart},{default:t(()=>[fe]),_:1},8,["color","disabled"])),e.isRunning?(g(),F(s,{key:1,color:"secondary",outlined:"",onClick:e.onClickStop},{default:t(()=>[me]),_:1})):k("",!0)]),_:1})]),_:1}),o(a,null,{default:t(()=>[Q("canvas",{ref:"matrixCanvas",width:e.canvasHtmlOutsideSize,height:e.canvasHtmlOutsideSize},null,8,Ce)]),_:1})]),_:1})]),_:1})]),_:1})}var Se=$(se,[["render",ge],["__scopeId","data-v-649d08e6"]]);const he={};function Ee(I,r){const S=Se,e=c("v-container");return g(),F(e,null,{default:t(()=>[o(S)]),_:1})}var be=$(he,[["render",Ee]]);export{be as default};
